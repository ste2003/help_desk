var MongoClient = require('mongodb').MongoClient;
var config = require('dao/conf');
var _db;

module.exports.conectar = function (funcionCallback){
	if(_db){ 
		funcionCallback(_db);
	} else{
		console.log("crear conexion"); 

		var urlConn = 'mongodb://'+config.servidor+':'+config.puerto+'/'+config.db;
		MongoClient.connect( urlConn, function(err, database) {
			if(err) {throw err;
				console.log('error en conexion..');} 
			console.log('continua en connexion.js... database:');
			//console.log(database);
			_db = database;
			funcionCallback(_db);
		});
	}	
}
